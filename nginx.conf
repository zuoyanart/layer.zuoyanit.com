server {
    listen      80;
   server_name groot.zuoyanit.com www.zuoyanit.com;
    return      301 https://$server_name$request_uri;
}

server
{
  listen 443;
  server_name groot.zuoyanit.com www.zuoyanit.com;
 
  #if ($host != 'www.test.com')
  #{
    #rewrite ^/(.*)$ http://www.test.com/$1 permanent;##301
  #}
  ssl on;
  ssl_certificate /home/ssl/groot.zuoyanit.com/groot.zuoyanit.com-ca-bundle.cer;
  ssl_certificate_key /home/ssl/groot.zuoyanit.com/groot.zuoyanit.com.key;

  set $rpath /home/host/groot-site/dist/home;

  index index.js index.html index.htm;

 if ( $http_user_agent ~ "(MIDP)|(WAP)|(UP.Browser)|(Smartphone)|(Obigo)|(Mobile)|(AU.Browser)|(wxd.Mms)|(WxdB.Browser)|(CLDC)|(UP.Link)|(KM.Browser)|(UCWEB)|(SEMC\-Browser)|(Mini)|(Symbian)|(Palm)|(Nokia)|(Panasonic)|(MOT\-)|(SonyEricsson)|(NEC\-)|(Alcatel)|(Ericsson)|(BENQ)|(BenQ)|(Amoisonic)|(Amoi\-)|(Capitel)|(PHILIPS)|(SAMSUNG)|(Lenovo)|(Mitsu)|(Motorola)|(SHARP)|(WAPPER)|(LG\-)|(LG/)|(EG900)|(CECT)|(Compal)|(kejian)|(Bird)|(BIRD)|(G900/V1.0)|(Arima)|(CTL)|(TDG)|(Daxian)|(DAXIAN)|(DBTEL)|(Eastcom)|(EASTCOM)|(PANTECH)|(Dopod)|(Haier)|(HAIER)|(KONKA)|(KEJIAN)|(LENOVO)|(Soutec)|(SOUTEC)|(SAGEM)|(SEC\-)|(SED\-)|(EMOL\-)|(INNO55)|(ZTE)|(iPhone)|(Android)|(Windows CE)|(Wget)|(Java)|(curl)|(Opera)" ){
   	 set $rpath   /home/host/groot-site/dist/touch;
  }

 root $rpath;

##vue history
 location / {
   try_files $uri $uri/ /index.html;
  }
  
  ## prerender
  # if ($http_user_agent ~* (baiduspider|googlebot|soso|bing|sogou|yahoo|sohu-search|yodao|YoudaoBot|robozilla|msnbot|MJ12bot|NHN|Twiceler|Sitemaps))
  # {
  #     set $prerender "127.0.0.1:12001";
  #     rewrite .* /$scheme://$host$request_uri? break;
  #     proxy_pass http://$prerender;
  # }
}
